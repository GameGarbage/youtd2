[gd_scene load_steps=24 format=3 uid="uid://ccr6p41srpf4p"]

[ext_resource type="Script" path="res://Scenes/DefaultCamera.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://cngv1rgplre2c" path="res://Scenes/HUD/HUD.tscn" id="2"]
[ext_resource type="Script" path="res://Scenes/Creeps/WavePath.gd" id="3_abrkq"]
[ext_resource type="PackedScene" uid="uid://bjvafnsglmpin" path="res://Scenes/Map/Map.tscn" id="5"]
[ext_resource type="PackedScene" uid="uid://bah0cloqblp5n" path="res://Scenes/Creeps/WaveSpawner.tscn" id="5_pan23"]
[ext_resource type="Shader" path="res://Resources/Shaders/FoggyCamera.gdshader" id="5_qgk1p"]
[ext_resource type="PackedScene" uid="uid://bprw8bivb1mcc" path="res://Scenes/AudioPlayerPool.tscn" id="5_rin5y"]
[ext_resource type="Script" path="res://Scenes/Player.gd" id="6_y63oe"]
[ext_resource type="Shader" path="res://Resources/Shaders/SaturationBurn.gdshader" id="7_gxbw6"]
[ext_resource type="PackedScene" uid="uid://d1xny6jmxj5i6" path="res://Scenes/PregameHUD/PregameHUD.tscn" id="8_idpxe"]
[ext_resource type="Script" path="res://Scenes/GameScene/SelectPointForCast.gd" id="8_r0gm8"]
[ext_resource type="Script" path="res://Scenes/GameScene.gd" id="9"]
[ext_resource type="Script" path="res://Scenes/GameScene/SelectTargetForCast.gd" id="9_14jv4"]
[ext_resource type="PackedScene" uid="uid://hiex318b5cvk" path="res://Scenes/PauseHUD/PauseHUD.tscn" id="9_r46bb"]
[ext_resource type="PackedScene" uid="uid://u1yl8rbswhtp" path="res://Scenes/HUD/TutorialMenu.tscn" id="10_x7sb7"]
[ext_resource type="PackedScene" uid="uid://db0630tccvc2i" path="res://Scenes/Towers/TowerPreview.tscn" id="11_0qewd"]
[ext_resource type="PackedScene" uid="uid://da13fj7bxtxaq" path="res://Scenes/Items/ItemStash.tscn" id="13_hhrst"]
[ext_resource type="PackedScene" uid="uid://clk0cpjpixjsk" path="res://Scenes/Towers/TowerStash.tscn" id="15_fssku"]
[ext_resource type="Script" path="res://Scenes/GameTime.gd" id="16_tame0"]

[sub_resource type="Curve2D" id="1"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 2555, -2374, 0, 0, 0, 0, -376, -882, 3.76354, -42.3398, -3.76354, 42.3398, -426, -827, 0, 0, 0, 0, -386, -759, 0, 0, 0, 0, 402, -364, -36.6945, -0.470442, 36.6945, 0.470442, 510, -341, 0, 0, 0, 0, 632, -370, 0, 0, 0, 0, 2049, -1082, -52.6896, -0.470442, 52.6896, 0.470442, 2174, -1124, 0, 0, 0, 0, 2305, -1079, 0, 0, 0, 0, 3075, -659, 1.40535, -33.4014, -1.40535, 33.4014, 3131, -627, 0, 0, 0, 0, 3073, -566, 0, 0, 0, 0, 642, 647, 40.458, 0.470442, -40.458, -0.470442, 515, 695, 0, 0, 0, 0, 388, 648, 0, 0, 0, 0, -897, 9, 45.1023, 0.136732, -45.1023, -0.136732, -1022, -33, 0, 0, 0, 0, -1152, 8, 0, 0, 0, 0, -1920, 394, -0.840896, -31.3902, 0.840896, 31.3902, -1961, 459, 0, 0, 0, 0, -1919, 521, 0, 0, 0, 0, -640, 1163, 0.379654, -32.8072, -0.379654, 32.8072, -603, 1228, 0, 0, 0, 0, -3325, 2662, 0, 0, 0, 0, -3325, 2622)
}
point_count = 26

[sub_resource type="Curve2D" id="Curve2D_72x3r"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 2558, -2376, 0, 0, 0, 0, 1471, -1828, 0, 0, 0, 0, 1507, 261, 0, 0, 0, 0, -1537, 166, 0, 0, 0, 0, -1224, 1534, 0, 0, 0, 0, -3356, 2589)
}
point_count = 6

[sub_resource type="ShaderMaterial" id="ShaderMaterial_cij5r"]
shader = ExtResource("7_gxbw6")
shader_parameter/vignette_intensity = 1.214
shader_parameter/edge_saturation = 0.174

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6fevd"]
shader = ExtResource("5_qgk1p")
shader_parameter/vignette_intensity = 0.299
shader_parameter/vignette_opacity = 0.742
shader_parameter/vignette_rgb = Color(0, 0, 0.129412, 1)

[node name="GameScene" type="Node" node_paths=PackedStringArray("_pregame_hud", "_pause_hud", "_hud", "_map", "_wave_spawner", "_tutorial_menu", "_ui_canvas_layer", "_camera", "_item_stash", "_tower_stash", "_player", "_game_start_timer", "_next_wave_timer", "_extreme_timer", "_game_time", "_object_container", "_tower_preview", "_select_point_for_cast", "_select_target_for_cast")]
process_mode = 3
script = ExtResource("9")
_pregame_hud = NodePath("UI/PregameHUD")
_pause_hud = NodePath("UI/PauseHUD")
_hud = NodePath("UI/HUD")
_map = NodePath("World/Map")
_wave_spawner = NodePath("WaveSpawner")
_tutorial_menu = NodePath("UI/TutorialMenu")
_ui_canvas_layer = NodePath("UI")
_camera = NodePath("World/Camera2D")
_item_stash = NodePath("ItemStash")
_tower_stash = NodePath("TowerStash")
_player = NodePath("Player")
_game_start_timer = NodePath("GameStartTimer")
_next_wave_timer = NodePath("NextWaveTimer")
_extreme_timer = NodePath("ExtremeTimer")
_game_time = NodePath("GameTime")
_object_container = NodePath("World/ObjectContainer")
_tower_preview = NodePath("World/TowerPreview")
_select_point_for_cast = NodePath("SelectPointForCast")
_select_target_for_cast = NodePath("SelectTargetForCast")

[node name="GameStartTimer" type="Timer" parent="."]
process_mode = 1
one_shot = true

[node name="NextWaveTimer" type="Timer" parent="."]
process_mode = 1
one_shot = true

[node name="ExtremeTimer" type="Timer" parent="."]

[node name="Player" type="Node" parent="."]
script = ExtResource("6_y63oe")

[node name="WaveSpawner" parent="." instance=ExtResource("5_pan23")]
process_mode = 1

[node name="ItemStash" parent="." instance=ExtResource("13_hhrst")]
process_mode = 1

[node name="TowerStash" parent="." instance=ExtResource("15_fssku")]

[node name="AudioPlayerPool" parent="." instance=ExtResource("5_rin5y")]

[node name="GameTime" type="Node" parent="."]
process_mode = 1
script = ExtResource("16_tame0")

[node name="SelectPointForCast" type="Node" parent="."]
script = ExtResource("8_r0gm8")

[node name="SelectTargetForCast" type="Node" parent="."]
script = ExtResource("9_14jv4")

[node name="World" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Map" parent="World" instance=ExtResource("5")]
unique_name_in_owner = true
process_mode = 1

[node name="CreepPathGround" type="Path2D" parent="World" groups=["wave_path"]]
process_mode = 1
z_index = 999
curve = SubResource("1")
script = ExtResource("3_abrkq")
z_points = {
8: 30,
9: 30,
10: 30,
11: 30,
12: 30
}

[node name="CreepPathAir" type="Path2D" parent="World" groups=["wave_path"]]
process_mode = 1
z_index = 999
curve = SubResource("Curve2D_72x3r")
script = ExtResource("3_abrkq")
is_air = true

[node name="ObjectContainer" type="Node2D" parent="World"]
process_mode = 1
z_index = 10
y_sort_enabled = true

[node name="EffectsContainer" type="Node2D" parent="World"]
process_mode = 1
z_index = 100

[node name="FloatingTextContainer" type="Node2D" parent="World"]
process_mode = 1
z_index = 1000

[node name="Camera2D" type="Camera2D" parent="World"]
unique_name_in_owner = true
process_mode = 1
z_index = 1000
position = Vector2(2.08165e-12, 2.08165e-12)
scale = Vector2(0.31481, 0.5)
limit_smoothed = true
editor_draw_limits = true
editor_draw_drag_margin = true
script = ExtResource("1")

[node name="TowerPreview" parent="World" instance=ExtResource("11_0qewd")]
visible = false
z_index = 100

[node name="UI" type="CanvasLayer" parent="."]

[node name="TutorialMenu" parent="UI" instance=ExtResource("10_x7sb7")]
visible = false
z_index = 2

[node name="DesaturationFilter" type="ColorRect" parent="UI"]
material = SubResource("ShaderMaterial_cij5r")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="VignetteFilter" type="ColorRect" parent="UI"]
material = SubResource("ShaderMaterial_6fevd")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="HUD" parent="UI" instance=ExtResource("2")]
unique_name_in_owner = true
size_flags_horizontal = 1
mouse_filter = 2

[node name="PregameHUD" parent="UI" instance=ExtResource("8_idpxe")]
visible = false

[node name="PauseHUD" parent="UI" instance=ExtResource("9_r46bb")]
process_mode = 3
visible = false

[connection signal="timeout" from="GameStartTimer" to="." method="_on_game_start_timer_timeout"]
[connection signal="timeout" from="NextWaveTimer" to="." method="_on_next_wave_timer_timeout"]
[connection signal="timeout" from="ExtremeTimer" to="." method="_on_extreme_timer_timeout"]
[connection signal="horadric_stash_changed" from="ItemStash" to="." method="_on_item_stash_horadric_stash_changed"]
[connection signal="main_stash_changed" from="ItemStash" to="." method="_on_item_stash_main_stash_changed"]
[connection signal="changed" from="TowerStash" to="." method="_on_tower_stash_changed"]
[connection signal="hidden" from="UI/TutorialMenu" to="." method="_on_tutorial_menu_hidden"]
[connection signal="hidden" from="UI/PregameHUD" to="." method="_on_pregame_hud_hidden"]
[connection signal="restart_pressed" from="UI/PauseHUD" to="." method="_on_pause_hud_restart_pressed"]
[connection signal="resume_pressed" from="UI/PauseHUD" to="." method="_on_pause_hud_resume_pressed"]
